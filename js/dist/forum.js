module.exports=function(t){var e={};function s(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=20)}([function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["models/Discussion"]},function(t,e){t.exports=flarum.core.compat.Model},function(t,e){t.exports=flarum.core.compat["components/Notification"]},function(t,e){t.exports=flarum.core.compat["components/CommentPost"]},function(t,e){t.exports=flarum.core.compat["helpers/username"]},function(t,e){t.exports=flarum.core.compat["helpers/icon"]},,function(t,e){t.exports=flarum.core.compat["components/NotificationGrid"]},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e){t.exports=flarum.core.compat["utils/PostControls"]},function(t,e){t.exports=flarum.core.compat["components/DiscussionPage"]},function(t,e){t.exports=flarum.core.compat["components/Post"]},function(t,e){t.exports=flarum.core.compat["components/PostMeta"]},function(t,e){t.exports=flarum.core.compat["helpers/userOnline"]},function(t,e){t.exports=flarum.core.compat.Component},function(t,e){t.exports=flarum.core.compat["helpers/humanTime"]},function(t,e){t.exports=flarum.core.compat.app},function(t,e){t.exports=flarum.core.compat["components/Badge"]},,function(t,e,s){"use strict";s.r(e);var n=s(0),o=s(1),r=s.n(o),a=s(2),i=s.n(a),c=s(8),p=s.n(c);function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var f=s(3),d=s.n(f),l=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var s=e.prototype;return s.icon=function(){return"fas fa-comment-dots"},s.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},s.content=function(){return app.translator.trans("fof-best-answer.forum.notification.content")},e}(d.a),b=s(9),w=s.n(b),A=s(10),h=s.n(A),y=s(11),P=s.n(y),x=s(4),v=s.n(x),_=s(12),O=s.n(_),B=s(13),j=s.n(B),S=s(5),g=s.n(S),N=s(14),U=s.n(N),I=s(15),k=s.n(I),C=s(6),H=s.n(C),M=s(16),T=s.n(M),D=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var s=e.prototype;return s.view=function(){var t=this.props,e=t.post,s=t.discussion;return m("div",{className:"Post--BestAnswer"},e?m("span",null,H()("fas fa-check"),app.translator.trans("fof-best-answer.forum.best_answer_button")):m("a",{href:app.route.post(e),config:m.route,"data-number":e.number()},H()("fas fa-check"),app.translator.trans("fof-best-answer.forum.best_answer_button")),m("span",{className:"BestAnswer--User"},app.translator.trans("fof-best-answer.forum.best_answer_label",{user:s.bestAnswerUser(),time_set:this.getSetTime(s),a:m("a",{onclick:function(){return m.route(app.route.user(s.bestAnswerUser()))}})})))},s.getSetTime=function(t){if(null!==t.bestAnswerSetAt())return T()(t.bestAnswerSetAt())},e}(k.a),z=s(17),G=s.n(z),q=s(18),E=s.n(q),F=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var s=e.prototype;return s.icon=function(){return"fas fa-check"},s.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},s.content=function(){var t=this.props.notification.fromUser();return app.translator.trans("fof-best-answer.forum.notification.awarded",{user:t})},e}(d.a);app.initializers.add("fof/best-answer",(function(){r.a.prototype.bestAnswerPost=i.a.hasOne("bestAnswerPost"),r.a.prototype.bestAnswerUser=i.a.hasOne("bestAnswerUser"),r.a.prototype.hasBestAnswer=i.a.attribute("hasBestAnswer"),r.a.prototype.startUserId=i.a.attribute("startUserId",Number),r.a.prototype.firstPostId=i.a.attribute("firstPostId",Number),r.a.prototype.canSelectBestAnswer=i.a.attribute("canSelectBestAnswer"),r.a.prototype.bestAnswerSetAt=i.a.attribute("bestAnswerSetAt",i.a.transformDate),app.notificationComponents.selectBestAnswer=l,app.notificationComponents.awardedBestAnswer=F,Object(n.extend)(r.a.prototype,"badges",(function(t){this.hasBestAnswer()&&!t.has("hidden")&&t.add("bestAnswer",E.a.component({type:"bestAnswer",icon:"fas fa-check",label:G.a.translator.trans("fof-best-answer.forum.answered_badge")}))})),Object(n.extend)(h.a,"moderationControls",(function(t,e){var s=e.discussion(),n=s.bestAnswerPost()&&s.bestAnswerPost().id()===e.id();e.pushAttributes({isBestAnswer:n}),!e.isHidden()&&1!==e.number()&&s.canSelectBestAnswer()&&app.session.user&&(!app.forum.attribute("canSelectBestAnswerOwnPost")&&e.user()&&e.user().id()===app.session.user.id()||t.add("bestAnswer",w.a.component({children:app.translator.trans(n?"fof-best-answer.forum.remove_best_answer":"fof-best-answer.forum.this_best_answer"),icon:"fa"+(n?"s":"r")+" fa-comment-dots",onclick:function(){n=!n,s.save({bestAnswerPostId:n?e.id():0,bestAnswerUserId:app.session.user.id(),relationships:n?{bestAnswerPost:e,bestAnswerUser:app.session.user}:delete s.data.relationships.bestAnswerPost}).then((function(){app.current instanceof P.a&&app.current.stream.update(),m.redraw(),n&&m.route(app.route.discussion(s))}))}})))})),Object(n.extend)(v.a.prototype,"headerItems",(function(t){var e=this.props.post;e.discussion().bestAnswerPost()&&e.discussion().bestAnswerPost().id()===e.id()&&!e.isHidden()&&t.add("isBestAnswer",D.component({post:e,discussion:e.discussion()}))})),Object(n.extend)(v.a.prototype,"footerItems",(function(t){var e=this.props.post,s=e.discussion(),n=s.bestAnswerPost();if(n&&!n.isHidden()&&1===e.number()&&!e.isHidden()){var o=n.user();t.add("bestAnswerPost",m("div",{className:"CommentPost"},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},o&&U()(o),m("h3",null,o?m("a",{href:app.route.user(o),config:m.route},g()(o)):g()(o)))),n.discussion()&&m("li",{className:"item-meta"},j.a.component({post:n})),D.component({post:n,discussion:s}))),m("div",{className:"Post-body"},m.trust(n.contentHtml()))),-10)}})),Object(n.extend)(O.a.prototype,"attrs",(function(t){var e=this.props.post;e.discussion().bestAnswerPost()&&e.discussion().bestAnswerPost().id()===e.id()&&!e.isHidden()&&(t.className+=" Post--bestAnswer")})),Object(n.extend)(p.a.prototype,"notificationTypes",(function(t){t.add("awardedBestAnswer",{name:"awardedBestAnswer",icon:"fas fa-check",label:app.translator.trans("fof-best-answer.forum.notification.preferences.awarded-best-answer")})}))}))}]);
//# sourceMappingURL=forum.js.map